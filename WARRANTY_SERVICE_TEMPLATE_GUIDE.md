# 📋 คู่มือการใช้งาน Service Template - ใบรับประกันสินค้า

## 🎯 ภาพรวม

ระบบใบรับประกันสินค้าได้รับการปรับปรุงให้เหมาะสมกับธุรกิจบ้านพักอาศัย โดยเพิ่มความสามารถในการ:
- บันทึกข้อมูลสินค้า/บริการที่ใช้บ่อย (Service Template)
- เรียกใช้ข้อมูลที่บันทึกไว้เพื่อความสะดวกรวดเร็ว
- เปลี่ยนหัวข้อให้เหมาะสมกับธุรกิจบ้าน

## 🏗️ การเปลี่ยนแปลงหลัก

### เปลี่ยนชื่อฟิลด์:
| เดิม | ใหม่ | คำอธิบาย |
|------|------|----------|
| **หมายเลขเครื่อง** | **แบบบ้าน** | ระบุแบบบ้านหรือรุ่นของสินค้า (เช่น A01, B02, Modern Loft) |
| **ชื่อสินค้า/รุ่น** | **ชื่อบริการ** | ระบุชื่อบริการ (เช่น บ้านพักอาศัยโครงสร้างพรีคาสท์สำเร็จรูป) |

### โครงสร้างหน้าฟอร์มใหม่:
```
1. ข้อมูลบริษัท
   - โลโก้บริษัท
   - ชื่อบริษัท
   - ที่อยู่

2. ข้อมูลลูกค้า
   - ชื่อลูกค้า
   - ข้อมูลติดต่อ
   - วันที่ซื้อ

3. ข้อมูลสินค้า/บริการ ⭐ ใหม่!
   - เลือกจากที่บันทึกไว้ (Service Template)
   - ชื่อบริการ
   - แบบบ้าน
   - ระยะเวลารับประกัน

4. เงื่อนไขการรับประกัน
```

## 🔧 วิธีใช้งาน Service Template

### 1. บันทึก Template ใหม่

1. คลิกปุ่ม **"เลือกจากที่บันทึกไว้"** ในส่วนข้อมูลสินค้า/บริการ
2. คลิกปุ่ม **"+ บันทึกใหม่"**
3. กรอกข้อมูล:
   - **ชื่อบริการ** * (บังคับ)
   - **แบบบ้าน** * (บังคับ)
   - **ระยะเวลารับประกัน** (ไม่บังคับ)
   - **เงื่อนไขการรับประกัน** (ไม่บังคับ)
4. คลิก **"💾 บันทึก"**

### 2. เลือกใช้ Template ที่บันทึกไว้

1. คลิกปุ่ม **"เลือกจากที่บันทึกไว้"**
2. ค้นหา Template ที่ต้องการ (สามารถพิมพ์ค้นหาได้)
3. คลิกที่ Template ที่ต้องการ
4. ระบบจะกรอกข้อมูลให้อัตโนมัติ:
   - ชื่อบริการ
   - แบบบ้าน
   - ระยะเวลารับประกัน
   - เงื่อนไขการรับประกัน

### 3. แก้ไข Template

เมื่อเลือก Template แล้ว คุณสามารถแก้ไขข้อมูลในฟอร์มได้ตามต้องการ โดยไม่กระทบ Template ต้นฉบับ

### 4. ลบ Template

1. เปิด Service Template Selector
2. เลื่อนเมาส์ไปที่ Template ที่ต้องการลบ
3. คลิกปุ่ม **X** สีแดงที่มุมขวาบน
4. ยืนยันการลบ

## 💡 ตัวอย่างการใช้งาน

### ตัวอย่าง Template 1: บ้านโครงสร้างพรีคาสท์

```yaml
ชื่อบริการ: บ้านพักอาศัยโครงสร้างพรีคาสท์สำเร็จรูป
แบบบ้าน: A01 - Modern House
ระยะเวลารับประกัน: 5 ปี
เงื่อนไขการรับประกัน: |
  1. รับประกันโครงสร้างพรีคาสท์ 5 ปี
  2. รับประกันงานติดตั้งระบบไฟฟ้า 1 ปี
  3. รับประกันงานประปา-สุขภัณฑ์ 1 ปี
  4. ไม่รับประกันความเสียหายจากการใช้งานผิดวิธี
```

### ตัวอย่าง Template 2: บ้านทั่วไป

```yaml
ชื่อบริการ: บ้านพักอาศัย
แบบบ้าน: B02 - Classic Style
ระยะเวลารับประกัน: 2 ปี
เงื่อนไขการรับประกัน: |
  1. รับประกันโครงสร้างอาคาร 2 ปี
  2. รับประกันงานติดตั้งทั้งหมด 1 ปี
  3. ไม่รวมอุปกรณ์และเครื่องใช้ไฟฟ้า
```

## 📊 คุณสมบัติของ Service Template

### ✅ ข้อดี:
- **ประหยัดเวลา**: ไม่ต้องพิมพ์ซ้ำๆ ทุกครั้ง
- **มาตรฐาน**: ข้อมูลสินค้า/บริการเป็นไปตามมาตรฐานเดียวกัน
- **ค้นหาง่าย**: มีระบบค้นหา Template
- **แก้ไขได้**: สามารถแก้ไขข้อมูลหลังเลือก Template
- **จัดการง่าย**: เพิ่ม/ลบ Template ได้ทันที

### 🔒 ความปลอดภัย:
- Template เป็นของแต่ละ User (แยกตาม Login)
- ไม่สามารถเห็น Template ของคนอื่น
- บันทึกใน Firestore แบบ Real-time

## 🗄️ โครงสร้างข้อมูล

### ServiceTemplate Interface:

```typescript
interface ServiceTemplate {
    id?: string;              // Auto-generated
    serviceName: string;      // ชื่อบริการ (บังคับ)
    houseModel: string;       // แบบบ้าน (บังคับ)
    warrantyPeriod: string;   // ระยะเวลารับประกัน
    terms: string;            // เงื่อนไขการรับประกัน
    userId: string;           // ผู้สร้าง template
    createdAt?: Date;         // วันที่สร้าง
    updatedAt?: Date;         // วันที่อัปเดต
}
```

### Firestore Collection:
- **Collection Name**: `serviceTemplates`
- **Index**: `userId`, `updatedAt (desc)`

## 🎨 UI/UX Features

### Service Template Selector:

```
┌─────────────────────────────────────────┐
│ 📋 เลือกข้อมูลสินค้า/บริการที่บันทึกไว้  │
│                          [+ บันทึกใหม่]  │
├─────────────────────────────────────────┤
│ 🔍 ค้นหา...                             │
├─────────────────────────────────────────┤
│ ┌─────────────────────────────────┐ [X] │
│ │ บ้านพักอาศัยโครงสร้างพรีคาสท์   │     │
│ │ 🏠 แบบ: A01 - Modern House      │     │
│ │ ⏰ รับประกัน: 5 ปี               │     │
│ └─────────────────────────────────┘     │
│ ┌─────────────────────────────────┐ [X] │
│ │ บ้านพักอาศัย                     │     │
│ │ 🏠 แบบ: B02 - Classic Style     │     │
│ │ ⏰ รับประกัน: 2 ปี               │     │
│ └─────────────────────────────────┘     │
└─────────────────────────────────────────┘
💡 คลิกเพื่อเลือก Template • Hover เพื่อลบ
```

## 🔄 การทำงานร่วมกับระบบอื่น

### 1. ใบส่งมอบงาน (Delivery Note)
- ไม่กระทบกัน
- ใช้ระบบแยกกัน

### 2. ข้อมูลบริษัท (Company Profiles)
- ทำงานร่วมกันได้
- Service Template อิสระจาก Company

### 3. ประวัติเอกสาร (History)
- บันทึกพร้อมข้อมูลที่เลือกจาก Template
- ไม่มีการ link กลับไปหา Template ต้นฉบับ

## 📝 Tips & Best Practices

### ✅ ควรทำ:
1. **ตั้งชื่อ Template ให้ชัดเจน** - ใช้ชื่อที่บ่งบอกถึงสินค้า/บริการชัดเจน
2. **ระบุแบบบ้านให้ครบถ้วน** - เพิ่มรายละเอียดแบบบ้านให้ชัดเจน
3. **เขียนเงื่อนไขให้ครบ** - ระบุเงื่อนไขการรับประกันให้ละเอียด
4. **ตรวจสอบก่อนบันทึก** - ตรวจสอบข้อมูลให้ถูกต้องก่อนบันทึก Template
5. **อัปเดตเป็นประจำ** - ลบ Template เก่าที่ไม่ใช้แล้ว

### ❌ ไม่ควรทำ:
1. **ใช้ชื่อซ้ำกัน** - อาจสับสนเวลาเลือก
2. **บันทึกข้อมูลไม่ครบ** - ควรกรอกข้อมูลให้ครบถ้วน
3. **ใช้ Template เก่า** - อาจมีข้อมูลไม่ตรงกับปัจจุบัน

## 🚀 ขั้นตอนการใช้งานจริง

### Workflow แนะนำ:

```
1. สร้าง Service Templates สำหรับสินค้าที่ขายบ่อย
   └─> บันทึก Template ไว้ 3-5 แบบที่ใช้บ่อยที่สุด

2. เมื่อมีลูกค้าใหม่
   └─> เปิดฟอร์มใบรับประกัน
   └─> กรอกข้อมูลบริษัท (หรือเลือกจากที่บันทึก)
   └─> กรอกข้อมูลลูกค้า (หรือเลือกจากที่บันทึก)
   └─> เลือก Service Template ⭐
   └─> แก้ไขข้อมูล (ถ้าจำเป็น)
   └─> กรอกเงื่อนไขเพิ่มเติม
   └─> บันทึกและพิมพ์

3. ออกใบรับประกันถัดไป
   └─> ใช้ Template เดิม แก้เฉพาะข้อมูลลูกค้า
   └─> ประหยัดเวลาได้มาก! 🎉
```

## 🛠️ Troubleshooting

### ปัญหา: ไม่พบ Template ที่บันทึกไว้
**วิธีแก้**: 
- ตรวจสอบว่า Login ด้วย Account เดิมหรือไม่
- กด Refresh/โหลดใหม่

### ปัญหา: ไม่สามารถบันทึก Template ได้
**วิธีแก้**:
- ตรวจสอบว่ากรอกชื่อบริการและแบบบ้านแล้ว (บังคับ)
- ตรวจสอบการเชื่อมต่ออินเทอร์เน็ต

### ปัญหา: Template หายไป
**วิธีแก้**:
- Template อาจถูกลบไปแล้ว
- ตรวจสอบ Account ที่ Login

## 📞 สรุป

Service Template System ช่วยให้การทำใบรับประกันสินค้าสำหรับธุรกิจบ้านพักอาศัยเป็นเรื่องง่ายและรวดเร็วขึ้น ด้วยการ:

✅ บันทึกข้อมูลสินค้า/บริการที่ใช้บ่อย  
✅ เรียกใช้ Template ด้วยคลิกเดียว  
✅ ปรับแต่งข้อมูลได้ตามต้องการ  
✅ ค้นหาและจัดการ Template ได้ง่าย  

**🎯 เป้าหมาย**: ประหยัดเวลาในการทำเอกสารได้มากกว่า 50%!

---

**หมายเหตุ**: คู่มือนี้ใช้สำหรับระบบใบรับประกันสินค้าที่ปรับปรุงใหม่ (v2.0) เท่านั้น

